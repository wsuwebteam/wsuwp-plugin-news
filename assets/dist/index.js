!function(e){var t={};function r(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(a,n,function(t){return e[t]}.bind(null,n));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=9)}([function(e,t){e.exports=window.wp.element},function(e,t){e.exports=window.lodash},function(e,t){e.exports=window.wp.i18n},function(e,t){e.exports=window.wp.components},function(e,t){e.exports=window.wp.apiFetch},function(e,t){e.exports=window.wp.data},function(e,t){e.exports=window.wp.compose},function(e,t){e.exports=window.wp.url},function(e,t){e.exports=window.React},function(e,t,r){"use strict";r.r(t);var a={};r.r(a),r.d(a,"media_contact",(function(){return b}));var n=r(0),i=r(1),o=r(2),s=r(3),c=r(5),l=r(6),m=r(4),h=r.n(m),d=r(7);function p(e){const t=e.map(e=>({children:[],parent:null,...e})),r=Object(i.groupBy)(t,"parent");if(r.null&&r.null.length)return t;const a=e=>e.map(e=>{const t=r[e.id];return{...e,children:t&&t.length?a(t):[]}});return a(r[0]||[])}var u=r(8),b=Object(u.forwardRef)((function(e,t){const[r,a]=Object(n.useState)({}),o=e=>{const t=e.target.name,r=e.target.value;a(e=>({...e,[t]:r}))};return Object(n.useEffect)(()=>{Object(i.isEmpty)(r)||e.onChange(r)},[r]),Object(u.useImperativeHandle)(t,()=>({clearMetaData(){a({})}})),Object(n.createElement)(n.Fragment,null,Object(n.createElement)("label",{htmlFor:"editor-post-taxonomies__hierarchical-terms-organization-"+e.instanceId,className:"editor-post-taxonomies__hierarchical-terms-label"},"Organization/Affiliation"),Object(n.createElement)("input",{name:"organization",type:"text",id:"editor-post-taxonomies__hierarchical-terms-organization-"+e.instanceId,className:"editor-post-taxonomies__hierarchical-terms-input",value:r.organization||"",onChange:o}),Object(n.createElement)("label",{htmlFor:"editor-post-taxonomies__hierarchical-terms-email-"+e.instanceId,className:"editor-post-taxonomies__hierarchical-terms-label"},"Email"),Object(n.createElement)("input",{name:"email",type:"text",id:"editor-post-taxonomies__hierarchical-terms-email-"+e.instanceId,className:"editor-post-taxonomies__hierarchical-terms-input",value:r.email||"",onChange:o}),Object(n.createElement)("label",{htmlFor:"editor-post-taxonomies__hierarchical-terms-phone-"+e.instanceId,className:"editor-post-taxonomies__hierarchical-terms-label"},"Phone Number"),Object(n.createElement)("input",{name:"phone_number",type:"text",id:"editor-post-taxonomies__hierarchical-terms-phone-"+e.instanceId,className:"editor-post-taxonomies__hierarchical-terms-input",value:r.phone_number||"",onChange:o}))}));const f={per_page:100,orderby:"name",order:"asc",_fields:"id,name,parent"};class g extends n.Component{constructor(){super(...arguments),this.findTerm=this.findTerm.bind(this),this.onChange=this.onChange.bind(this),this.onChangeFormName=this.onChangeFormName.bind(this),this.onChangeFormDescription=this.onChangeFormDescription.bind(this),this.onChangeFormMeta=this.onChangeFormMeta.bind(this),this.onChangeFormParent=this.onChangeFormParent.bind(this),this.onAddTerm=this.onAddTerm.bind(this),this.onToggleForm=this.onToggleForm.bind(this),this.setFilterValue=this.setFilterValue.bind(this),this.sortBySelected=this.sortBySelected.bind(this),this.state={loading:!0,availableTermsTree:[],availableTerms:[],adding:!1,formName:"",formDescription:"",formMeta:"",formParent:"",showForm:!1,filterValue:"",filteredTermsTree:[]},this.metaFields=React.createRef()}onChange(e){const{onUpdateTerms:t,terms:r=[],taxonomy:a}=this.props;t(-1!==r.indexOf(e)?Object(i.without)(r,e):[...r,e],a.rest_base)}onChangeFormName(e){const t=""===e.target.value.trim()?"":e.target.value;this.setState({formName:t})}onChangeFormDescription(e){const t=""===e.target.value.trim()?"":e.target.value;this.setState({formDescription:t})}onChangeFormMeta(e){this.setState({formMeta:e})}onChangeFormParent(e){this.setState({formParent:e})}onToggleForm(){this.setState(e=>({showForm:!e.showForm}))}findTerm(e,t,r){return Object(i.find)(e,e=>(!e.parent&&!t||parseInt(e.parent)===parseInt(t))&&e.name.toLowerCase()===r.toLowerCase())}onAddTerm(e){e.preventDefault();const{onUpdateTerms:t,taxonomy:r,terms:a,slug:n}=this.props,{formName:s,formDescription:c,formMeta:l,formParent:m,adding:u,availableTerms:b}=this.state;if(""===s||u)return;const g=this.findTerm(b,m,s);if(g)return Object(i.some)(a,e=>e===g.id)||t([...a,g.id],r.rest_base),void this.setState({formName:"",formParent:"",formDescription:"",formMeta:""});this.setState({adding:!0}),this.addRequest=h()({path:"/wp/v2/"+r.rest_base,method:"POST",data:{name:s,parent:m||void 0,description:c||void 0,meta:l||void 0}}),this.addRequest.catch(e=>"term_exists"===e.code?(this.addRequest=h()({path:Object(d.addQueryArgs)("/wp/v2/"+r.rest_base,{...f,parent:m||0,search:s})}),this.addRequest.then(e=>this.findTerm(e,m,s))):Promise.reject(e)).then(e=>{const s=Object(i.find)(this.state.availableTerms,t=>t.id===e.id)?this.state.availableTerms:[e,...this.state.availableTerms],c=Object(o.sprintf)(
/* translators: %s: taxonomy name */
Object(o._x)("%s added","term"),Object(i.get)(this.props.taxonomy,["labels","singular_name"],"category"===n?Object(o.__)("Category"):Object(o.__)("Term")));this.props.speak(c,"assertive"),this.addRequest=null,this.setState({adding:!1,formName:"",formParent:"",formDescription:"",formMeta:"",availableTerms:s,availableTermsTree:this.sortBySelected(p(s))}),this.metaFields.current.clearMetaData(),t([...a,e.id],r.rest_base)},e=>{"abort"!==e.statusText&&(this.addRequest=null,this.setState({adding:!1}))})}componentDidMount(){this.fetchTerms()}componentWillUnmount(){Object(i.invoke)(this.fetchRequest,["abort"]),Object(i.invoke)(this.addRequest,["abort"])}componentDidUpdate(e){this.props.taxonomy!==e.taxonomy&&this.fetchTerms()}fetchTerms(){const{taxonomy:e}=this.props;e&&(this.fetchRequest=h()({path:Object(d.addQueryArgs)("/wp/v2/"+e.rest_base,f)}),this.fetchRequest.then(e=>{const t=this.sortBySelected(p(e));this.fetchRequest=null,this.setState({loading:!1,availableTermsTree:t,availableTerms:e})},e=>{"abort"!==e.statusText&&(this.fetchRequest=null,this.setState({loading:!1}))}))}sortBySelected(e){const{terms:t}=this.props,r=e=>-1!==t.indexOf(e.id)||void 0!==e.children&&!!(e.children.map(r).filter(e=>e).length>0);return e.sort((e,t)=>{const a=r(e),n=r(t);return a===n?0:a&&!n?-1:!a&&n?1:0}),e}setFilterValue(e){const{availableTermsTree:t}=this.state,r=e.target.value,a=t.map(this.getFilterMatcher(r)).filter(e=>e),n=e=>{let t=0;for(let r=0;r<e.length;r++)t++,void 0!==e[r].children&&(t+=n(e[r].children));return t};this.setState({filterValue:r,filteredTermsTree:a});const i=n(a),s=Object(o.sprintf)(
/* translators: %d: number of results */
Object(o._n)("%d result found.","%d results found.",i),i);this.props.debouncedSpeak(s,"assertive")}getFilterMatcher(e){const t=r=>{if(""===e)return r;const a={...r};return a.children.length>0&&(a.children=a.children.map(t).filter(e=>e)),(-1!==a.name.toLowerCase().indexOf(e.toLowerCase())||a.children.length>0)&&a};return t}renderTerms(e){const{terms:t=[]}=this.props;return e.map(e=>Object(n.createElement)("div",{key:e.id,className:"editor-post-taxonomies__hierarchical-terms-choice"},Object(n.createElement)(s.CheckboxControl,{checked:-1!==t.indexOf(e.id),onChange:()=>{const t=parseInt(e.id,10);this.onChange(t)},label:Object(i.unescape)(e.name)}),!!e.children.length&&Object(n.createElement)("div",{className:"editor-post-taxonomies__hierarchical-terms-subchoices"},this.renderTerms(e.children))))}render(){const{slug:e,taxonomy:t,instanceId:r,hasCreateAction:c,hasAssignAction:l}=this.props;if(!l)return null;const{availableTermsTree:m,availableTerms:h,filteredTermsTree:d,formName:p,formDescription:u,formParent:b,loading:f,showForm:g,filterValue:_}=this.state,O=(r,a,n)=>Object(i.get)(t,["labels",r],"category"===e?a:n),j=O("add_new_item",Object(o.__)("Add new category"),Object(o.__)("Add new term")),x=O("new_item_name",Object(o.__)("Add new category"),Object(o.__)("Add new term")),T=O("parent_item",Object(o.__)("Parent Category"),Object(o.__)("Parent Term")),v=`— ${T} —`,w=j,y="editor-post-taxonomies__hierarchical-terms-input-"+r,C="editor-post-taxonomies__hierarchical-terms-filter-"+r,F=Object(i.get)(this.props.taxonomy,["labels","search_items"],Object(o.__)("Search Terms")),S=Object(i.get)(this.props.taxonomy,["name"],Object(o.__)("Terms")),E=h.length>=8,N=a[t.slug];return[E&&Object(n.createElement)("label",{key:"filter-label",htmlFor:C},F),E&&Object(n.createElement)("input",{type:"search",id:C,value:_,onChange:this.setFilterValue,className:"editor-post-taxonomies__hierarchical-terms-filter",key:"term-filter-input"}),Object(n.createElement)("div",{className:"editor-post-taxonomies__hierarchical-terms-list",key:"term-list",tabIndex:"0",role:"group","aria-label":S},this.renderTerms(""!==_?d:m)),!f&&c&&Object(n.createElement)(s.Button,{key:"term-add-button",onClick:this.onToggleForm,className:"editor-post-taxonomies__hierarchical-terms-add","aria-expanded":g,isLink:!0},j),g&&Object(n.createElement)("form",{onSubmit:this.onAddTerm,key:"hierarchical-terms-form"},Object(n.createElement)("label",{htmlFor:y,className:"editor-post-taxonomies__hierarchical-terms-label"},x),Object(n.createElement)("input",{type:"text",id:y,className:"editor-post-taxonomies__hierarchical-terms-input",value:p,onChange:this.onChangeFormName,required:!0}),Object(n.createElement)("label",{htmlFor:"editor-post-taxonomies__hierarchical-terms-description-"+r,className:"editor-post-taxonomies__hierarchical-terms-label"},"Description"),Object(n.createElement)("textarea",{id:"editor-post-taxonomies__hierarchical-terms-description-"+r,className:"editor-post-taxonomies__hierarchical-terms-input",value:u,onChange:this.onChangeFormDescription}),Object(n.createElement)(N,{ref:this.metaFields,onChange:this.onChangeFormMeta,instanceId:r}),!!h.length&&t.hierarchical&&Object(n.createElement)(s.TreeSelect,{label:T,noOptionLabel:v,onChange:this.onChangeFormParent,selectedId:b,tree:m}),Object(n.createElement)(s.Button,{isSecondary:!0,type:"submit",className:"editor-post-taxonomies__hierarchical-terms-submit"},w))]}}var _=Object(l.compose)([Object(c.withSelect)((e,{slug:t})=>{const{getCurrentPost:r}=e("core/editor"),{getTaxonomy:a}=e("core"),n=a(t);return{hasCreateAction:!!n&&Object(i.get)(r(),["_links","wp:action-create-"+n.rest_base],!1),hasAssignAction:!!n&&Object(i.get)(r(),["_links","wp:action-assign-"+n.rest_base],!1),terms:n?e("core/editor").getEditedPostAttribute(n.rest_base):[],taxonomy:n}}),Object(c.withDispatch)(e=>({onUpdateTerms(t,r){e("core/editor").editPost({[r]:t})}})),s.withSpokenMessages,l.withInstanceId])(g);wp.hooks.addFilter("editor.PostTaxonomyType","wsuwp-plugin-news",(function(e){const t=["media_contact"];return function(r){return t.includes(r.slug)?Object(n.createElement)(_,r):Object(n.createElement)(e,r)}}))}]);